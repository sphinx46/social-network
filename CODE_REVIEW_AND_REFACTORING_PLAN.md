# üîç –ö–æ–¥-—Ä–µ–≤—å—é –∏ –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

**–î–∞—Ç–∞:** 2025-01-XX  
**–†–µ–≤—å—é–µ—Ä:** Senior Java Developer  
**–û–±–ª–∞—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (api-gateway, user-profile-service, eureka-server)  
**–ò—Å–∫–ª—é—á–µ–Ω–æ:** monolith –º–æ–¥—É–ª—å

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#1-–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-—É—è–∑–≤–∏–º–æ—Å—Ç–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
3. [–ù–∞—Ä—É—à–µ–Ω–∏—è SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤](#3-–Ω–∞—Ä—É—à–µ–Ω–∏—è-solid-–ø—Ä–∏–Ω—Ü–∏–ø–æ–≤)
4. [–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#4-–ø—Ä–æ–±–ª–µ–º—ã-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
5. [–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏](#5-–ø—Ä–æ–±–ª–µ–º—ã-–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏-–∏-–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏)
6. [–ü—Ä–æ–±–ª–µ–º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏](#6-–ø—Ä–æ–±–ª–µ–º—ã-—Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏)
7. [–ü—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](#7-–ø—Ä–æ–±–ª–µ–º—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-–∏-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
8. [–ü—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞](#8-–ø—Ä–æ–±–ª–µ–º—ã-–∫–∞—á–µ—Å—Ç–≤–∞-–∫–æ–¥–∞)
9. [–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞](#9-–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-–ø–ª–∞–Ω-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

---

## 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### üî¥ –ö–†–ò–¢–ò–ß–ù–û: –•–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ docker-compose.yml

**–§–∞–π–ª:** `docker-compose.yml:23`

```yaml
KEYCLOAK_CLIENT_SECRET=axTCR87wh9WJMgGC9Bgf7rNSdU6WYHFy
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ü—Ä–∏ –∫–æ–º–º–∏—Ç–µ –≤ Git —Å–µ–∫—Ä–µ—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
- –ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Secrets –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` —Ñ–∞–π–ª (–¥–æ–±–∞–≤–∏—Ç—å –≤ `.gitignore`)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å HashiCorp Vault –∏–ª–∏ AWS Secrets Manager
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Kubernetes Secrets –¥–ª—è production

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

---

### üî¥ –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ user-profile-service

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileController.java:30-31`

```java
@RequestHeader("X-User-Id") UUID keycloakUserId,
@RequestHeader("X-Username") String username
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞–º –æ—Ç Gateway
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –ø—Ä—è–º–æ–º –¥–æ—Å—Ç—É–ø–µ –∫ —Å–µ—Ä–≤–∏—Å—É
- SecurityConfig —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã: `.anyRequest().permitAll()`

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (HMAC) –∏–ª–∏ JWT —Ç–æ–∫–µ–Ω–∞
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ç–æ–∫–µ–Ω –º–µ–∂–¥—É Gateway –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é (—Ç–æ–ª—å–∫–æ Gateway –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–∏—Å–∞–º)
4. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (X-Forwarded-For, –ø—Ä–æ–≤–µ—Ä–∫–∞ IP)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting

**–§–∞–π–ª:** `api-gateway/src/main/resources/application.yml`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- KeyResolver —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞ `RequestRateLimiter` –≤ routes
- –í–æ–∑–º–æ–∂–Ω–∞ DDoS –∞—Ç–∞–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
filters:
  - name: RequestRateLimiter
    args:
      redis-rate-limiter.replenishRate: 10
      redis-rate-limiter.burstCapacity: 20
      redis-rate-limiter.requestedTokens: 1
      key-resolver: "#{@userKeyResolver}"
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –°–ª–∞–±–∞—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–§–∞–π–ª:** `api-gateway/src/main/java/.../UserContextFilter.java:110-140`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —É–¥–∞–ª—è–µ—Ç `\r\n` –∏ –æ–±—Ä–µ–∑–∞–µ—Ç –¥–ª–∏–Ω—É
- –ù–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç header injection –ø–æ–ª–Ω–æ—Å—Ç—å—é
- Email –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ regex –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±–æ–π–¥–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É OWASP ESAPI –¥–ª—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `@Email` –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é
- Whitelist –ø–æ–¥—Ö–æ–¥ –≤–º–µ—Å—Ç–æ blacklist

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTPS/TLS

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏–¥—É—Ç –ø–æ HTTP
- –¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –í–æ–∑–º–æ–∂–µ–Ω MITM –∞—Ç–∞–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TLS/SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mTLS –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç CSRF

**–§–∞–π–ª:** `api-gateway/src/main/java/.../SecurityConfig.java:83`

```java
.csrf(csrf -> csrf.disable())
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- CSRF –∑–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞
- –î–ª—è API Gateway —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ –Ω—É–∂–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ API (–Ω–µ –≤–µ–±-—Ñ–æ—Ä–º—ã), –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º
- –î–æ–±–∞–≤–∏—Ç—å CSRF —Ç–æ–∫–µ–Ω—ã –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SameSite cookies

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- user-profile-service –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω—ã
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ Gateway

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É JWT —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Resource Server –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Spring Security
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ Database per Service

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í `docker-compose.yml` —Å–æ–∑–¥–∞–Ω—ã –ë–î –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `user-profile-postgres`
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ë–î (relationship, content, feed, messaging, notification) –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –∏ –ª–∏—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ë–î –∏–∑ docker-compose.yml
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —ç—Ç–∏—Ö –ë–î
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –ë–î –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- –õ—é–±–æ–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ù–µ—Ç service-to-service —Ç–æ–∫–µ–Ω–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mTLS –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å service account —Ç–æ–∫–µ–Ω—ã
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OAuth2 Client Credentials flow

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileController.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API (`/api/v1/profile`)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API —Å–ª–æ–º–∞–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `/api/v1/profile`, `/api/v2/profile`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept: application/vnd.api.v1+json`
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–µ–ø—Ä–µ–∫–∞—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –õ–æ–≥–∏ –Ω–µ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ
- –ù–µ—Ç correlation ID –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å `X-Request-Id` –∏–ª–∏ `X-Correlation-Id` –∑–∞–≥–æ–ª–æ–≤–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Spring Cloud Sleuth –∏–ª–∏ Micrometer Tracing
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –ª–æ–≥–æ–≤ (Loki —É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

**–§–∞–π–ª:** `user-profile-service/src/main/java/ru/cs/vsu/social_network/...`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–º–µ—à–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤: `ru.cs.vsu` –∏ `ru.vsu.cs`
- –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–∫–µ—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–∫–µ—Ç: `ru.vsu.cs.social_network.*`
- –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ: `controller`, `service`, `repository`, `entity`, `dto`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API Gateway –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Eureka Dashboard –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Gateway (`/eureka/**`)
- –≠—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–µ –Ω—É–∂–Ω–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞—Ç—å Eureka –∏–∑ Gateway routes
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Eureka
- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è Eureka dashboard

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 3. –ù–∞—Ä—É—à–µ–Ω–∏—è SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

### üü† –í–´–°–û–ö–ò–ô: –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle (SRP)

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileServiceImpl.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `ProfileServiceImpl` –¥–µ–ª–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ:
  - –í–∞–ª–∏–¥–∞—Ü–∏—é (—á–µ—Ä–µ–∑ `ProfileValidator`)
  - –ú–∞–ø–ø–∏–Ω–≥ (—á–µ—Ä–µ–∑ `EntityMapper`)
  - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
  - –†–∞–±–æ—Ç—É —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π (—É–∂–µ –µ—Å—Ç—å `ProfileValidator`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Command –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ `ProfileQueryService` –∏ `ProfileCommandService`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –ù–∞—Ä—É—à–µ–Ω–∏–µ Dependency Inversion Principle (DIP)

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileEntityProviderImpl.java:49`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `ProfileEntityProviderImpl.getByKeycloakUserId()` –Ω–µ –æ–±—ä—è–≤–ª–µ–Ω –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ `ProfileEntityProvider`
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ProfileEntityProvider`
- –ò–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –æ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ù–∞—Ä—É—à–µ–Ω–∏–µ Open/Closed Principle (OCP)

**–§–∞–π–ª:** `api-gateway/src/main/java/.../UserContextFilter.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–∏–ª—å—Ç—Ä –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –¥–ª—è OIDC –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–ª–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `UserContextExtractor` —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ù–∞—Ä—É—à–µ–Ω–∏–µ Interface Segregation Principle (ISP)

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileService.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ProfileService` —Å–º–µ—à–∏–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏
- –ö–ª–∏–µ–Ω—Ç—ã –≤—ã–Ω—É–∂–¥–µ–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ `ProfileQueryService` –∏ `ProfileCommandService`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CQRS –ø–∞—Ç—Ç–µ—Ä–Ω

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 4. –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileServiceImpl.java`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –≤ –ë–î
- Redis –ø–æ–¥–∫–ª—é—á–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å `@Cacheable` –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ —á—Ç–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –∫–∞–∫ –∫—ç—à –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@CacheEvict` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ (—Å–µ–π—á–∞—Å –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- –ù–µ—Ç eager/lazy loading —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@EntityGraph` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∑–∞–≥—Ä—É–∑–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ü–∏–∏ DTO –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô (–ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ)

---

### üü° –°–†–ï–î–ù–ò–ô: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–§–∞–π–ª:** `api-gateway/src/main/resources/application.yml:13-17`

```yaml
lettuce:
  pool:
    max-active: 8
    max-idle: 8
    min-idle: 0
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `min-idle: 0` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `min-idle: 2-4`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `max-active` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling –¥–ª—è PostgreSQL

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —è–≤–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HikariCP –¥–ª—è user-profile-service
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HikariCP –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è production

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–ø–∏—Å–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Pageable` –∏–∑ Spring Data

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô (–ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ)

---

## 5. –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ retry –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç retry –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö
- –û–¥–∏–Ω —Å–±–æ–π –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ –∫–ª–∏–µ–Ω—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Resilience4j Retry
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å exponential backoff
- –£–∂–µ –µ—Å—Ç—å Resilience4j –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: Circuit Breaker –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–§–∞–π–ª:** `api-gateway/src/main/resources/application.yml:170-186`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Circuit Breaker –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ routes
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å Circuit Breaker —Ñ–∏–ª—å—Ç—Ä –≤ routes:
```yaml
filters:
  - name: CircuitBreaker
    args:
      name: userProfileService
      fallbackUri: forward:/fallback
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É –≤–º–µ—Å—Ç–æ graceful degradation

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å fallback endpoints
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –∫–∞–∫ fallback –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –°–ª–∞–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `api-gateway/src/main/java/.../GlobalExceptionHandler.java:66-70`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†—É—á–Ω–∞—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è JSON —Å—Ç—Ä–æ–∫
- –í–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Jackson` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ (RFC 7807)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health checks –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Health checks –µ—Å—Ç—å, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Redis, PostgreSQL)
- –°–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å "healthy", –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `HealthIndicator` –¥–ª—è Redis –∏ PostgreSQL
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@ConditionalOnHealthIndicator`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 6. –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è API Gateway
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å `@SpringBootTest` –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WebTestClient` –¥–ª—è Gateway —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `UserContextFilter`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ unit —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –º–∞–ø–ø–µ—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã —Å Mockito
- –ü–æ–∫—Ä—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ç–µ—Å—Ç–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TestContainers –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö
- –°–ª–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@MockBean` –¥–ª—è Spring —Ç–µ—Å—Ç–æ–≤
- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å builder –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 7. –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–π Java

**–§–∞–π–ª:** `api-gateway/pom.xml:19` vs `pom.xml:25`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `api-gateway` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Java 17
- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π POM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Java 21
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é Java –¥–æ 21 –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- –û–±–Ω–æ–≤–∏—Ç—å `java.version` –≤ `api-gateway/pom.xml`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

---

### üü† –í–´–°–û–ö–ò–ô: –•–∞—Ä–¥–∫–æ–¥ URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `api-gateway/src/main/resources/application.yml:108`

```yaml
authorization-uri: http://localhost:8080/realms/...
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `localhost` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `keycloak:8080`

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è dev/prod
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Spring Profiles

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü† –í–´–°–û–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û–¥–∏–Ω `application.yml` –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –°–µ–∫—Ä–µ—Ç—ã –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å `application-dev.yml`, `application-prod.yml`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Config Server (Spring Cloud Config)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Eureka

**–§–∞–π–ª:** `api-gateway/src/main/resources/application.yml:135-136`

```yaml
registry-fetch-interval-seconds: 5
initial-instance-info-replication-interval-seconds: 5
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (5 —Å–µ–∫—É–Ω–¥)
- –õ–∏—à–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Eureka

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å lease expiration

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource limits –≤ docker-compose

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç limits –¥–ª—è api-gateway –∏ user-profile-service
- –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å `deploy.resources.limits` –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å memory –∏ CPU limits

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

## 8. –ü—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### üü° –°–†–ï–î–ù–ò–ô: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

**–§–∞–π–ª:** `api-gateway/src/main/java/.../CustomAuthorizationRequestResolver.java:28-56, 66-93`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–≤–∞ –º–µ—Ç–æ–¥–∞ `resolve()` –¥–µ–ª–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../UserContextFilter.java:23`

```java
private static final int MAX_HEADER_LENGTH = 200;
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É
- –°–ª–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–µ–∑ –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –º–µ—Å—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@ConfigurationProperties`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `user-profile-service/src/main/java/.../ProfileController.java:30`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- –ù–µ—Ç `@Valid` –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@RequestHeader` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–ò–ô: –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ INFO
- –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (username, email)

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DEBUG –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

---

### üü¢ –ù–ò–ó–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç JavaDoc –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –ù–µ—Ç API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Swagger –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Gateway)

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å JavaDoc
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SpringDoc OpenAPI –¥–ª—è Gateway
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô

---

## 9. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (1-2 –Ω–µ–¥–µ–ª–∏)

#### –ù–µ–¥–µ–ª—è 1
1. **–£–±—Ä–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ docker-compose.yml**
   - –°–æ–∑–¥–∞—Ç—å `.env` —Ñ–∞–π–ª
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `.gitignore`
   - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ user-profile-service**
   - –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π JWT —Ç–æ–∫–µ–Ω
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é Java –≤ api-gateway**
   - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ Java 21
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

#### –ù–µ–¥–µ–ª—è 2
4. **–î–æ–±–∞–≤–∏—Ç—å rate limiting**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `RequestRateLimiter` —Ñ–∏–ª—å—Ç—Ä
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –ó–∞–º–µ–Ω–∏—Ç—å `localhost` –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å profiles –¥–ª—è dev/prod

---

### –§–∞–∑–∞ 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

#### –ù–µ–¥–µ–ª—è 3
6. **–î–æ–±–∞–≤–∏—Ç—å –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å mTLS –∏–ª–∏ service tokens
   - –û–±–Ω–æ–≤–∏—Ç—å SecurityConfig –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

7. **–î–æ–±–∞–≤–∏—Ç—å API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –í–≤–µ—Å—Ç–∏ `/api/v1/` –ø—Ä–µ—Ñ–∏–∫—Å
   - –û–±–Ω–æ–≤–∏—Ç—å routes –≤ Gateway

8. **–î–æ–±–∞–≤–∏—Ç—å correlation ID –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞**
   - –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `X-Correlation-Id`
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Spring Cloud Sleuth

#### –ù–µ–¥–µ–ª—è 4
9. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–∫–µ—Ç–æ–≤**
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏–º–ø–æ—Ä—Ç–æ–≤

10. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ë–î**
    - –£–¥–∞–ª–∏—Ç—å –∏–∑ docker-compose.yml
    - –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –Ω–∏—Ö

---

### –§–∞–∑–∞ 3: –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (2-3 –Ω–µ–¥–µ–ª–∏)

#### –ù–µ–¥–µ–ª—è 5
11. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –∫—ç—à –≤ user-profile-service
    - –î–æ–±–∞–≤–∏—Ç—å `@Cacheable` –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏

12. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Circuit Breaker**
    - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ routes –≤ Gateway
    - –î–æ–±–∞–≤–∏—Ç—å fallback endpoints

#### –ù–µ–¥–µ–ª—è 6
13. **–î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º**
    - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Resilience4j Retry
    - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å–±–æ–µ–≤

14. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å connection pooling**
    - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HikariCP
    - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Redis pool

---

### –§–∞–∑–∞ 4: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –Ω–µ–¥–µ–ª–∏)

#### –ù–µ–¥–µ–ª—è 7
15. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
    - –¢–µ—Å—Ç—ã –¥–ª—è API Gateway
    - –¢–µ—Å—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

16. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã**
    - –ü–æ–∫—Ä—ã—Ç—å —Å–µ—Ä–≤–∏—Å—ã —Ç–µ—Å—Ç–∞–º–∏
    - –ü–æ–∫—Ä—ã—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã —Ç–µ—Å—Ç–∞–º–∏

#### –ù–µ–¥–µ–ª—è 8
17. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ SOLID –Ω–∞—Ä—É—à–µ–Ω–∏–π**
    - –†–∞–∑–¥–µ–ª–∏—Ç—å ProfileService –Ω–∞ Query/Command
    - –ò—Å–ø—Ä–∞–≤–∏—Ç—å ProfileEntityProvider

18. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jackson –¥–ª—è JSON
    - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫

---

### –§–∞–∑–∞ 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (1 –Ω–µ–¥–µ–ª—è)

#### –ù–µ–¥–µ–ª—è 9
19. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
    - JavaDoc –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
    - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)
    - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

20. **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    - Security –∞—É–¥–∏—Ç
    - Code review –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –∏–∑ –∫–æ–¥–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω rate limiting
- [ ] –ü—Ä–æ—à–µ–ª security –∞—É–¥–∏—Ç (OWASP Top 10)

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- [ ] Circuit Breaker —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Retry –º–µ—Ö–∞–Ω–∏–∑–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Health checks –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] Uptime > 99.9%

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Response time < 200ms (p95)
- [ ] Throughput > 1000 req/s

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- [ ] Code coverage > 80%
- [ ] –í—Å–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–æ–±–ª—é–¥–µ–Ω—ã
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö code smells
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- **SonarQube** - –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- **SpotBugs** - –ø–æ–∏—Å–∫ –±–∞–≥–æ–≤
- **OWASP Dependency Check** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **JUnit 5** - unit —Ç–µ—Å—Ç—ã
- **Mockito** - –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
- **TestContainers** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **WireMock** - –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Prometheus** - –º–µ—Ç—Ä–∏–∫–∏ (—É–∂–µ –µ—Å—Ç—å)
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (—É–∂–µ –µ—Å—Ç—å)
- **Loki** - –ª–æ–≥–∏ (—É–∂–µ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)
- **Jaeger/Zipkin** - distributed tracing

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—å–µ–∑–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å.

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 6/10

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–∞–ª—å–Ω–µ–π—à–∏–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º
3. –í–Ω–µ–¥—Ä–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ü—Ä–æ–≤–µ—Å—Ç–∏ security –∞—É–¥–∏—Ç –ø–µ—Ä–µ–¥ production deployment

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** 1.0

